(this.webpackJsonplab2=this.webpackJsonplab2||[]).push([[0],{43:function(e,t,n){},49:function(e,t,n){},51:function(e,t,n){},53:function(e,t,n){},55:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){"use strict";n.r(t);var i=n(15),c=n.n(i),a=n(44),r=n.n(a),s=(n(49),n(0)),l=n.n(s),o=n(3),d=n(5),u=n(26),j=n(16),b=(n(51),n(31)),h=n(18),m=(n(53),n(6));var p=function(e){return Object(m.jsx)("input",{type:"text",className:e.field,onChange:function(t){return e.onListItemFieldChanged(e.listId,e.id,e.field,t.target.value)},value:e[e.field]})};var O=function(e){var t=["listItem "];function n(t){return t===e.priority}return e.selected&&t.push("selected"),Object(m.jsx)("div",{className:t.join(" "),id:e.id,onClick:function(t){e.onRowClick(t.currentTarget.id)},children:Object(m.jsxs)("div",{class:"container2",children:[Object(m.jsx)("input",{className:"listiteminput",type:"checkbox","aria-label":"You have selected "+e.name,onChange:function(t){e.onListItemFieldChanged(e.listId,e.id,"completed",t.target.checked)},id:e.id,checked:e.completed}),Object(m.jsxs)("div",{className:"listitemfield",children:[" ",Object(m.jsx)(p,Object(u.a)({field:"name"},e))]}),Object(m.jsx)("div",{className:"itemDropdown","aria-label":"priority. You are on the priority dropdown for "+e.name+" You can choose low, medium or high priority",children:Object(m.jsxs)("select",{name:"Priority",id:"priorityInput",onChange:function(t){e.onListItemFieldChanged(e.listId,e.id,"priority",t.target.value)},children:[Object(m.jsx)("option",{value:"c",id:"low",selected:n("c"),children:"low"}),Object(m.jsx)("option",{value:"b",id:"medium",selected:n("b"),children:"medium"}),Object(m.jsx)("option",{value:"a",id:"high",selected:n("a"),children:"high"})]})})]})},e.id)},x=(n(43),n(29));n(55);var f=function(e){return Object(m.jsxs)("button",{type:"button",className:e.isSelected?"selected1":"unselected1",onClick:function(){return e.setShowCompletedItems(e.name)},children:[Object(m.jsx)("span",{className:"visually-hidden"}),Object(m.jsx)("span",{children:e.name})]})},v=n(30),g=n(33);var y=function(e){var t=e.db.collection("waverlywang7-listitems-AuthenticationRequired"),n=Object(i.useState)({name:"",id:0,completed:!1}),c=Object(j.a)(n,2),a=(c[0],c[1]),r=Object(i.useState)(null),s=Object(j.a)(r,2),d=s[0],b=s[1],p=Object(i.useState)("All"),y=Object(j.a)(p,2),k=y[0],S=y[1],w=Object(i.useState)(null),I=Object(i.useState)(null),C=Object(i.useState)(null),L=Object(i.useState)(!1),N=Object(j.a)(L,2),A=N[0],D=N[1],F=Object(i.useState)(""),W=Object(j.a)(F,2),T=W[0],E=W[1],B=Object(i.useState)(null),P=Object(i.useState)({sortField:"name",sortDirection:"asc"}),Y=Object(j.a)(P,2),R=Y[0],U=Y[1],H=Object(i.useState)(!1),M=Object(j.a)(H,2),V=(M[0],M[1]),q=Object(i.useState)(!1),G=Object(j.a)(q,2),J=G[0],_=G[1],z=Object(v.a)(t.doc(e.listId).collection("tasks").orderBy(R.sortField,R.sortDirection)),Z=Object(j.a)(z,3),K=Z[0],Q=(Z[1],Z[2],Object(i.useState)("Descending")),X=Object(j.a)(Q,2),$=X[0],ee=X[1],te=[];function ne(e,t){U({sortField:e,sortDirection:t}),V(!0)}function ie(e,n){t.doc(e).collection("tasks").doc(n).delete()}void 0!==K&&(te=K.docs.map((function(e){return e.data()})));var ce={All:function(){return!0},Uncompleted:function(e){return!e.completed},Completed:function(e){return e.completed}},ae=Object.keys(ce).map((function(t){return Object(m.jsx)(f,{name:t,"aria-pressed":e.isSelected,isSelected:t===k,setShowCompletedItems:S})})),re=te.filter(ce[k]).map((function(t){return Object(m.jsx)(O,Object(u.a)({listId:e.listId,onRowClick:function(e){return b(e)},onListItemFieldChanged:e.onListItemFieldChanged,selected:t.id===d},t),t.id)}));function se(){return 1===te.filter((function(e){return e.completed})).length}function le(){return(le=Object(o.a)(l.a.mark((function n(i){var c,a,r;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(g.a)(t.doc(e.listId));case 2:if(c=n.sent,e.user.uid==c.data().owner){n.next=7;break}console.log("You do not have permission to do this."),n.next=22;break;case 7:if(!c.exists()){n.next=21;break}if(e.user.email!==i.current.value){n.next=12;break}console.log("You are the owner, you can't remove yourself."),n.next=19;break;case 12:return a=c.data().sharedWith,r=a.filter((function(e){return e!=i.current.value})),console.log("unsharedEmail",r),n.next=17,t.doc(e.listId).update({sharedWith:r});case 17:console.log("Shared with:",c.data().sharedWith),E(c.data().sharedWith);case 19:n.next=22;break;case 21:console.log("No document exists");case 22:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function oe(){return(oe=Object(o.a)(l.a.mark((function n(i){var c;return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(g.a)(t.doc(e.listId));case 2:if(c=n.sent,e.user.uid==c.data().owner){n.next=7;break}console.log("You don't have permission to share because you are not the owner"),n.next=20;break;case 7:if(!c.exists()){n.next=19;break}if(console.log("email.current.value",i.current.value),e.user.email!==i.current.value){n.next=13;break}console.log("You already have access to the list"),n.next=17;break;case 13:return n.next=15,t.doc(e.listId).update({sharedWith:[].concat(Object(h.a)(c.data().sharedWith),[i.current.value])});case 15:E(c.data().sharedWith.map((function(e){return e+",     "}))),console.log("Shared with:",c.data().sharedWith);case 17:n.next=20;break;case 19:console.log("No document exists");case 20:case"end":return n.stop()}}),n)})))).apply(this,arguments)}return Object(m.jsxs)("div",{class:"myList",children:[Object(m.jsxs)("div",{className:"topRowButtons",children:[Object(m.jsx)("button",{type:"button",name:"delete",id:"deleteList",onClick:function(){return e.onListDeleted(e.listId)},children:"Delete List"}),Object(m.jsx)("button",{type:"button",name:"Home",id:"home",onClick:e.returnHome,children:" Return Home"}),Object(m.jsxs)("div",{className:"shareButton",children:[Object(m.jsx)("button",{type:"button",name:"shareList",id:"shareList",onClick:function(){return D(!A)},children:"Sharing"}),A&&Object(m.jsxs)("div",{className:"emailSubmit",children:[Object(m.jsx)("input",{type:"text",ref:I,id:"shareEmail",placeholder:"Enter email to add"}),Object(m.jsx)("button",{type:"button",name:"submit",id:"submit",onClick:function(){return function(e){return oe.apply(this,arguments)}(I)},children:" Share List"}),Object(m.jsx)("input",{type:"text",ref:C,id:"unshareEmail",placeholder:"Enter email you want to remove"}),Object(m.jsx)("button",{type:"button",name:"unshareEmail",id:"unshareEmail",onClick:function(){return function(e){return le.apply(this,arguments)}(C)},children:" Unshare List"})]})]})]}),Object(m.jsxs)("div",{id:"sharedList",children:[" ",Object(m.jsxs)("h4",{children:[" Shared with: ",T," "]})]}),Object(m.jsxs)("h2",{id:"h2",role:"heading","aria-level":"1","aria-label":e.name,children:[" ",e.name," "]}),ae,Object(m.jsxs)("div",{class:"inputbar",children:[Object(m.jsx)("input",{type:"text",ref:w,id:"myInput",onChange:function(e){return _(function(e){return""!==e}(e.target.value))},placeholder:"I need to..."}),J&&Object(m.jsxs)("div",{id:"prioritycontainer",children:[Object(m.jsx)("text",{id:"priorityText",children:" Priority"}),Object(m.jsx)("div",{className:"dropdown","aria-label":" You are on the priority dropdown. You can choose low, medium or high",children:Object(m.jsxs)("select",{name:"Priority",ref:B,id:"priorityInput",children:[Object(m.jsx)("option",{value:"c",children:"low"}),Object(m.jsx)("option",{value:"b",children:"medium"}),Object(m.jsx)("option",{value:"a",children:"high"})]})})]}),J&&Object(m.jsx)("div",{class:"addTask",children:Object(m.jsx)("button",{type:"button",name:"add",id:"add",onClick:function(){var t={name:w.current.value,id:Object(x.a)(),completed:!1,priority:B.current.value};a(t),e.onItemAdded(t.name,t.priority,e.listId),w.current.value="",_(!1)},children:"Add Task"})})]}),Object(m.jsxs)("div",{className:"sortRadio",children:[Object(m.jsxs)("label",{class:"radio-inline",children:[Object(m.jsx)("input",{type:"radio",id:"html",name:"fav_language",value:"HTML",onClick:function(){return ne("priority","asc")}}),"Sort By Priority"]}),Object(m.jsxs)("label",{className:"radio-inline",children:[Object(m.jsx)("input",{type:"radio",id:"css",name:"fav_language",value:"CSS",onClick:function(){ne("name","asc")}}),"Sort By Name"]}),Object(m.jsxs)("label",{className:"radio-inline",children:[Object(m.jsx)("input",{type:"radio",id:"javascript",name:"fav_language",value:"JavaScript",onClick:function(){ne("creationDate","asc")}}),"Sort By Creation Date"]})]}),Object(m.jsx)("button",{class:"direction",onClick:function(){"asc"===R.sortDirection?(U({sortField:R.sortField,sortDirection:"desc"}),ee("Descending")):(U({sortField:R.sortField,sortDirection:"asc"}),ee("Ascending"))},id:"order","aria-label":"Press this to Order by"+$+"You can toggle between ascending and descending",children:$}),Object(m.jsx)("br",{}),Object(m.jsxs)("div",{class:"deleteButtons",children:[se()?Object(m.jsx)("div",{class:"deleteTask",children:Object(m.jsx)("button",{type:"button",name:"delete",id:"delete",onClick:function(){ie(e.listId,d),b(null)},children:" Delete Task"})}):null,!se()&&te.filter((function(e){return e.completed})).length>0?Object(m.jsx)("div",{class:"deleteAllButton",children:Object(m.jsx)("button",{type:"button",id:"deleteAll",onClick:function(){!function(){console.log("data",te);var t=te.filter((function(e){return e.completed}));console.log("completedItems",t);for(var n=0;n<t.length;n++)ie(e.listId,t[n].id)}()},children:"Delete All Completed Tasks"})}):null]}),Object(m.jsxs)("div",{class:"taskList",children:[" ",re," "]}),Object(m.jsx)("br",{})]})};n(56);var k=function(e){var t=e.db.collection("waverlywang7-listitems-AuthenticationRequired"),n=Object(i.useState)(""),c=Object(j.a)(n,2),a=c[0],r=c[1],s=Object(i.useRef)(null),l=Object(v.a)(t.where("sharedWith","array-contains",e.user.email)),o=Object(j.a)(l,3),d=o[0],u=o[1],b=(o[2],[]);void 0!==d&&(b=d.docs.map((function(e){return e.data()})));var h=b.map((function(t){return Object(m.jsx)("button",{name:t.name,id:"listNameButton",onClick:function(n){return e.setListIdAndName(t.id,t)},children:t.name})}));return Object(m.jsx)("div",{children:u?Object(m.jsx)("div",{children:"Loading..."}):Object(m.jsxs)("div",{class:"myLists",children:[Object(m.jsx)("h2",{children:" MY LISTS "}),Object(m.jsxs)("div",{className:"inputbar",children:[Object(m.jsx)("input",{type:"text",ref:s,id:"myListInput",onChange:function(e){return r(e.target.value)},placeholder:"Name your list"}),Object(m.jsx)("div",{className:"addList",children:Object(m.jsx)("button",{type:"button",name:"add",id:"add",onClick:function(){return e.handleAddList(a,s)},children:"Create New List"})})]}),Object(m.jsxs)("div",{className:"LoL",children:[" ",h," "]})]})})};n(57);var S=function(e){var t=["tab-list-item"];return e.activeTab===e.label&&t.push("tab-list-active"),Object(m.jsx)("li",{className:t.join(" "),onClick:function(){return e.onClickTab(e.label)},children:e.label})};var w=function(e){var t=Object(i.useState)(e.children[0].key),n=Object(j.a)(t,2),c=n[0],a=n[1];return Object(m.jsxs)("div",{className:"tabs",children:[Object(m.jsx)("ol",{className:"tab-list",children:e.children.map((function(e){return Object(m.jsx)(S,{label:e.key,activeTab:c,onClickTab:function(e){return a(e)}},e.key)}))}),e.children.find((function(e){return e.key===c}))]})},I=n(39);b.a.initializeApp({apiKey:"AIzaSyC5fXtmZ_AgxF6iO2tyLVbZGSLAkvSqpAQ",authDomain:"cs124lab5waverlyria.firebaseapp.com",projectId:"cs124lab5waverlyria",storageBucket:"cs124lab5waverlyria.appspot.com",messagingSenderId:"1050666858786",appId:"1:1050666858786:web:7cbb73999edafbcbbfcd7b",measurementId:"G-0BBJ256RS9"});var C=b.a.firestore(),L=b.a.auth(),N=new b.a.auth.GoogleAuthProvider,A="waverlywang7-listitems-AuthenticationRequired";function D(){var e=Object(i.useState)(null),t=Object(i.useState)(null),n=Object(I.c)(L),c=Object(j.a)(n,4),a=c[0],r=c[1],s=c[2],l=c[3];return r?Object(m.jsx)("div",{children:"Unexpectedly signed in already"}):s?Object(m.jsx)("p",{children:"Logging in\u2026"}):Object(m.jsxs)("div",{children:[l&&Object(m.jsxs)("p",{children:['"Error logging in: " ',l.message]}),Object(m.jsx)("input",{type:"text",id:"myInput",ref:e,placeholder:"Email"}),Object(m.jsx)("input",{type:"text",id:"myInput",ref:t,placeholder:"Password"}),Object(m.jsx)("button",{onClick:function(){return a(e.current.value,t.current.value)},children:"Login with Email/PW"}),Object(m.jsx)("button",{onClick:function(){return L.signInWithPopup(N)},children:"Login with Google"})]})}function F(){var e=Object(i.useState)(null),t=Object(i.useState)(null),n=Object(I.b)(L),c=Object(j.a)(n,4),a=c[0],r=c[1],s=c[2],l=c[3];return r?Object(m.jsx)("div",{children:"Unexpectedly signed in already"}):s?Object(m.jsx)("p",{children:"Signing up\u2026"}):Object(m.jsxs)("div",{children:[l&&Object(m.jsxs)("p",{children:['"Error signing up: " ',l.message]}),Object(m.jsx)("input",{type:"text",id:"myInput",ref:e,placeholder:"Email"}),Object(m.jsx)("input",{type:"text",id:"myInput",ref:t,placeholder:"Password"}),Object(m.jsx)("button",{onClick:function(){return a(e.current.value,t.current.value)},children:"Create test user"})]})}function W(e){var t=C.collection(A),n=Object(i.useState)(null),c=Object(j.a)(n,2),a=c[0],r=c[1],s=Object(i.useState)(null),u=Object(j.a)(s,2),h=u[0],p=u[1],O=Object(v.a)(t),f=Object(j.a)(O,3),S=f[0],w=f[1],I=(f[2],null);function L(){return(L=Object(o.a)(l.a.mark((function n(i){return l.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return n.next=2,Object(g.a)(t.doc(e.listId));case 2:n.sent,t.doc(i).data().owner!=e.user.uid?console.log("you cannot delete a list because you are not the owner"):t.doc(i).delete();case 4:case"end":return n.stop()}}),n)})))).apply(this,arguments)}function N(n,i){var c={name:n,id:Object(x.a)(),owner:e.user.uid,email:e.user.email,sharedWith:[e.user.email]};console.log(c.sharedWith,"sharedWith"),t.doc(c.id).set(c),i.current.value=""}return void 0!==S&&(I=S.docs.map((function(e){return e.data()})),null===a||I.find((function(e){return e.id===a}))||r(null)),Object(m.jsxs)("div",{children:[w&&Object(m.jsx)("h1",{children:"Loading"}),a?Object(m.jsx)(y,{user:e.user,db:C,name:h,sharedWith:N.sharedWith,listId:a,returnHome:function(){r(null),p(null)},onListDeleted:function(e){return L.apply(this,arguments)},onItemAdded:function(e,n,i){var c={id:Object(x.a)(),priority:n,name:e,creationDate:b.a.database.ServerValue.TIMESTAMP,completed:!1};t.doc(i).collection("tasks").doc(c.id).set(c)},onListItemFieldChanged:function(e,n,i,c){console.log("field",i),console.log("value",c),t.doc(e).collection("tasks").doc(n).update(Object(d.a)({},i,c))},handleAddList:N}):Object(m.jsx)(k,{user:e.user,db:C,setListIdAndName:function(e,t){r(e),p(t.name),console.log(a,"selectedListId")},handleAddList:N,sharedWith:N.sharedWith,list:I})]})}var T=function(e){C.collection(A);var t=Object(I.a)(L),n=Object(j.a)(t,3),i=n[0],c=n[1],a=n[2];return c?Object(m.jsx)("p",{children:"Checking..."}):i?Object(m.jsxs)("div",{id:"signin",children:[i.displayName||i.email,Object(m.jsx)(W,Object(u.a)(Object(u.a)({},e),{},{user:i})),Object(m.jsx)("button",{type:"button",onClick:function(){return L.signOut()},children:"Logout"}),!i.emailVerified&&Object(m.jsx)("button",{type:"button",onClick:function(){L.currentUser.sendEmailVerification()},children:"Verify email"})]}):Object(m.jsxs)(m.Fragment,{children:[a&&Object(m.jsxs)("p",{children:["Error App: ",a.message]}),Object(m.jsxs)(w,{children:[Object(m.jsx)(D,{},"Sign In"),Object(m.jsx)(F,{},"Sign Up")]})]})},E=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,59)).then((function(t){var n=t.getCLS,i=t.getFID,c=t.getFCP,a=t.getLCP,r=t.getTTFB;n(e),i(e),c(e),a(e),r(e)}))};r.a.render(Object(m.jsx)(c.a.StrictMode,{children:Object(m.jsx)(T,{initialList:[]})}),document.getElementById("root")),E()}},[[58,1,2]]]);
//# sourceMappingURL=main.f5ed3611.chunk.js.map